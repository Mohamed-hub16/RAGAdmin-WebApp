{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'../../css/log-interface/connection.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ConnectionBlock=()=>{const navigate=useNavigate();const[identifiant,setIdentifiant]=useState('');const[password,setPassword]=useState('');const[errors,setErrors]=useState({});const handleConnection=async e=>{e.preventDefault();const validationErrors={};if(!identifiant)validationErrors.identifiant='Identifiant requis.';if(!password)validationErrors.password='Mot de passe requis.';setErrors(validationErrors);if(Object.keys(validationErrors).length>0)return;try{const response=await fetch('http://localhost:5000/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({identifiant,password})});const data=await response.json();if(response.status===200){localStorage.setItem('userId',data.user.id);navigate('/RAGAdmin');}else{setErrors({identifiant:data.message||'Identifiant ou mot de passe incorrect.'});}}catch(error){console.error('Erreur lors de la connexion :',error);setErrors({identifiant:'Une erreur est survenue lors de la connexion.'});}};const handleRegister=e=>{e.preventDefault();navigate('/Register');};return/*#__PURE__*/_jsxs(\"div\",{className:\"connection-div\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"yellow-block\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"margin-div\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"h2-connection\",children:\"Connectez-Vous\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-connection\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",spellCheck:\"false\",className:\"login-area\",placeholder:\"Identifiant\",value:identifiant,onChange:e=>setIdentifiant(e.target.value)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",spellCheck:\"false\",className:\"password-area\",placeholder:\"Mot de passe\",value:password,onChange:e=>setPassword(e.target.value)}),errors.identifiant&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.identifiant}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.password})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button-connection\",onClick:handleConnection,children:\"Se Connecter\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button-register\",onClick:handleRegister,children:\"S'inscrire\"})]})]});};export default ConnectionBlock;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","ConnectionBlock","navigate","identifiant","setIdentifiant","password","setPassword","errors","setErrors","handleConnection","e","preventDefault","validationErrors","Object","keys","length","response","fetch","method","headers","body","JSON","stringify","data","json","status","localStorage","setItem","user","id","message","error","console","handleRegister","className","children","type","spellCheck","placeholder","value","onChange","target","onClick"],"sources":["C:/Users/matia/Documents/rag/RAGAdmin-WebApp/rag-webapp/src/components/log-interface/connection-block.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../../css/log-interface/connection.css';\r\n\r\nconst ConnectionBlock: React.FC = () => {\r\n    const navigate = useNavigate();\r\n\r\n    const [identifiant, setIdentifiant] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [errors, setErrors] = useState<{ identifiant?: string; password?: string }>({});\r\n\r\n    const handleConnection = async (e: React.MouseEvent<HTMLButtonElement>) => {\r\n        e.preventDefault();\r\n\r\n        const validationErrors: { identifiant?: string; password?: string } = {};\r\n        if (!identifiant) validationErrors.identifiant = 'Identifiant requis.';\r\n        if (!password) validationErrors.password = 'Mot de passe requis.';\r\n\r\n        setErrors(validationErrors);\r\n\r\n        if (Object.keys(validationErrors).length > 0) return;\r\n\r\n        try {\r\n            const response = await fetch('http://localhost:5000/api/auth/login', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ identifiant, password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.status === 200) {\r\n                localStorage.setItem('userId', data.user.id);\r\n                navigate('/RAGAdmin');\r\n            } else {\r\n                setErrors({ identifiant: data.message || 'Identifiant ou mot de passe incorrect.' });\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Erreur lors de la connexion :', error);\r\n            setErrors({ identifiant: 'Une erreur est survenue lors de la connexion.' });\r\n        }\r\n    };\r\n\r\n\r\n    const handleRegister = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n        e.preventDefault();\r\n        navigate('/Register');\r\n    };\r\n\r\n    return (\r\n        <div className=\"connection-div\">\r\n            <div className=\"yellow-block\" />\r\n            <div className=\"margin-div\">\r\n                <span className=\"h2-connection\">Connectez-Vous</span>\r\n                <form className=\"form-connection\">\r\n                    <div className=\"input-container\">\r\n                        <input\r\n                            type=\"text\"\r\n                            spellCheck=\"false\"\r\n                            className=\"login-area\"\r\n                            placeholder=\"Identifiant\"\r\n                            value={identifiant}\r\n                            onChange={(e) => setIdentifiant(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"input-container\">\r\n                        <input\r\n                            type=\"password\"\r\n                            spellCheck=\"false\"\r\n                            className=\"password-area\"\r\n                            placeholder=\"Mot de passe\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                        />\r\n                        {errors.identifiant && <p className=\"error-message\">{errors.identifiant}</p>}\r\n                        {errors.password && <p className=\"error-message\">{errors.password}</p>}\r\n                    </div>\r\n                    <button className=\"button-connection\" onClick={handleConnection}>\r\n                        Se Connecter\r\n                    </button>\r\n                </form>\r\n                <button className=\"button-register\" onClick={handleRegister}>\r\n                    S'inscrire\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ConnectionBlock;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}