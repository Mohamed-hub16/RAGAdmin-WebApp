{"ast":null,"code":"import React,{useEffect,useState}from\"react\";// @ts-ignore\nimport\"../../../css/main-interface/header.css\";import profileicon from\"../../../res/profile-icon.png\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function UserHeader(){const navigate=useNavigate();const[username,setUsername]=useState(null);useEffect(()=>{const userId=localStorage.getItem(\"userId\");const fetchUserDetails=async()=>{try{const response=await fetch(\"http://localhost:5000/api/user/\".concat(userId));if(!response.ok){throw new Error(\"Erreur API : \".concat(response.statusText));}const data=await response.json();setUsername(data.user.identifiant);}catch(err){console.error(\"Erreur lors de la récupération des informations utilisateur :\",err);}};fetchUserDetails();},[navigate]);const handleLogout=()=>{localStorage.removeItem(\"userId\");navigate(\"/Login\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"avatar-img\",src:profileicon,alt:\"user-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"user-span\",children:username||\"Chargement...\"}),/*#__PURE__*/_jsx(\"span\",{className:\"deconnect-span\",onClick:handleLogout,children:\"Se d\\xE9connecter\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","profileicon","useNavigate","jsx","_jsx","jsxs","_jsxs","UserHeader","navigate","username","setUsername","userId","localStorage","getItem","fetchUserDetails","response","fetch","concat","ok","Error","statusText","data","json","user","identifiant","err","console","error","handleLogout","removeItem","className","children","src","alt","onClick"],"sources":["C:/Users/matia/Documents/rag/RAGAdmin-WebApp/rag-webapp/src/components/main-interface/header/UserHeader.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n// @ts-ignore\r\nimport \"../../../css/main-interface/header.css\";\r\nimport profileicon from \"../../../res/profile-icon.png\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport function UserHeader() {\r\n    const navigate = useNavigate();\r\n    const [username, setUsername] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        const userId = localStorage.getItem(\"userId\");\r\n\r\n        const fetchUserDetails = async () => {\r\n            try {\r\n                const response = await fetch(`http://localhost:5000/api/user/${userId}`);\r\n                if (!response.ok) {\r\n                    throw new Error(`Erreur API : ${response.statusText}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n                setUsername(data.user.identifiant);\r\n            } catch (err) {\r\n                console.error(\"Erreur lors de la récupération des informations utilisateur :\", err);\r\n            }\r\n        };\r\n\r\n        fetchUserDetails();\r\n    }, [navigate]);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem(\"userId\");\r\n        navigate(\"/Login\");\r\n    };\r\n\r\n    return (\r\n        <div className=\"user-info\">\r\n            <img className=\"avatar-img\" src={profileicon} alt=\"user-avatar\" />\r\n            <div className=\"user-details\">\r\n                <span className=\"user-span\">{username || \"Chargement...\"}</span>\r\n                <span className=\"deconnect-span\" onClick={handleLogout}>\r\n                    Se déconnecter\r\n                </span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD;AACA,MAAO,wCAAwC,CAC/C,MAAO,CAAAC,WAAW,KAAM,+BAA+B,CACvD,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,MAAO,SAAS,CAAAC,UAAUA,CAAA,CAAG,CACzB,KAAM,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACO,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAgB,IAAI,CAAC,CAE7DD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAY,MAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAE7C,KAAM,CAAAC,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,mCAAAC,MAAA,CAAmCN,MAAM,CAAE,CAAC,CACxE,GAAI,CAACI,QAAQ,CAACG,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,iBAAAF,MAAA,CAAiBF,QAAQ,CAACK,UAAU,CAAE,CAAC,CAC1D,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClCZ,WAAW,CAACW,IAAI,CAACE,IAAI,CAACC,WAAW,CAAC,CACtC,CAAE,MAAOC,GAAG,CAAE,CACVC,OAAO,CAACC,KAAK,CAAC,+DAA+D,CAAEF,GAAG,CAAC,CACvF,CACJ,CAAC,CAEDX,gBAAgB,CAAC,CAAC,CACtB,CAAC,CAAE,CAACN,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAoB,YAAY,CAAGA,CAAA,GAAM,CACvBhB,YAAY,CAACiB,UAAU,CAAC,QAAQ,CAAC,CACjCrB,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,CAED,mBACIF,KAAA,QAAKwB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtB3B,IAAA,QAAK0B,SAAS,CAAC,YAAY,CAACE,GAAG,CAAE/B,WAAY,CAACgC,GAAG,CAAC,aAAa,CAAE,CAAC,cAClE3B,KAAA,QAAKwB,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzB3B,IAAA,SAAM0B,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEtB,QAAQ,EAAI,eAAe,CAAO,CAAC,cAChEL,IAAA,SAAM0B,SAAS,CAAC,gBAAgB,CAACI,OAAO,CAAEN,YAAa,CAAAG,QAAA,CAAC,mBAExD,CAAM,CAAC,EACN,CAAC,EACL,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}