{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'../../css/register-interface/register-block.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterBlock=()=>{const navigate=useNavigate();const[identifiant,setIdentifiant]=useState('');const[password,setPassword]=useState('');const[passwordConfirmation,setPasswordConfirmation]=useState('');const[errors,setErrors]=useState({});const[isLoading,setIsLoading]=useState(false);const handleRegisterCompleted=async e=>{e.preventDefault();const validationErrors={};if(!identifiant)validationErrors.identifiant='Identifiant requis.';if(!password)validationErrors.password='Mot de passe requis.';if(password!==passwordConfirmation)validationErrors.confirmation='Les mots de passe ne correspondent pas.';setErrors(validationErrors);if(Object.keys(validationErrors).length>0)return;setIsLoading(true);try{const response=await fetch('http://localhost:5000/api/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({identifiant,password})});const data=await response.json();if(response.status===201){navigate('/Login');}else{setErrors({identifiant:data.message||'Erreur lors de l’inscription.'});}}catch(error){console.error('Erreur lors de l’inscription:',error);setErrors({identifiant:'Une erreur est survenue. Veuillez réessayer.'});}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"register-div\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"yellow-block\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"margin-div\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"h2-register\",children:\"Inscrivez-Vous\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-register\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",spellCheck:\"false\",className:\"register-id-area\",placeholder:\"Identifiant\",value:identifiant,onChange:e=>setIdentifiant(e.target.value)}),errors.identifiant&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.identifiant})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",spellCheck:\"false\",className:\"register-password-area\",placeholder:\"Mot de passe\",value:password,onChange:e=>setPassword(e.target.value)}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",spellCheck:\"false\",className:\"register-password-confirmation-area\",placeholder:\"Confirmation mot de passe\",value:passwordConfirmation,onChange:e=>setPasswordConfirmation(e.target.value)}),errors.confirmation&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.confirmation})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button-register-completed\",onClick:handleRegisterCompleted,disabled:isLoading,children:isLoading?'En cours...':\"S'inscrire\"})]})]});};export default RegisterBlock;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","RegisterBlock","navigate","identifiant","setIdentifiant","password","setPassword","passwordConfirmation","setPasswordConfirmation","errors","setErrors","isLoading","setIsLoading","handleRegisterCompleted","e","preventDefault","validationErrors","confirmation","Object","keys","length","response","fetch","method","headers","body","JSON","stringify","data","json","status","message","error","console","className","children","type","spellCheck","placeholder","value","onChange","target","onClick","disabled"],"sources":["C:/Users/matia/Documents/rag/RAGAdmin-WebApp/rag-webapp/src/components/register-interface/register-block.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../../css/register-interface/register-block.css';\r\n\r\nconst RegisterBlock: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const [identifiant, setIdentifiant] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [passwordConfirmation, setPasswordConfirmation] = useState('');\r\n    const [errors, setErrors] = useState<{ identifiant?: string; password?: string; confirmation?: string }>({});\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const handleRegisterCompleted = async (e: React.MouseEvent<HTMLButtonElement>) => {\r\n        e.preventDefault();\r\n\r\n        const validationErrors: { identifiant?: string; password?: string; confirmation?: string } = {};\r\n        if (!identifiant) validationErrors.identifiant = 'Identifiant requis.';\r\n        if (!password) validationErrors.password = 'Mot de passe requis.';\r\n        if (password !== passwordConfirmation) validationErrors.confirmation = 'Les mots de passe ne correspondent pas.';\r\n\r\n        setErrors(validationErrors);\r\n\r\n        if (Object.keys(validationErrors).length > 0) return;\r\n\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const response = await fetch('http://localhost:5000/api/auth/register', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ identifiant, password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.status === 201) {\r\n                navigate('/Login');\r\n            } else {\r\n                setErrors({ identifiant: data.message || 'Erreur lors de l’inscription.' });\r\n            }\r\n        } catch (error) {\r\n            console.error('Erreur lors de l’inscription:', error);\r\n            setErrors({ identifiant: 'Une erreur est survenue. Veuillez réessayer.' });\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"register-div\">\r\n            <div className=\"yellow-block\" />\r\n            <div className=\"margin-div\">\r\n                <span className=\"h2-register\">Inscrivez-Vous</span>\r\n                <form className=\"form-register\">\r\n                    <div className=\"input-container\">\r\n                        <input\r\n                            type=\"text\"\r\n                            spellCheck=\"false\"\r\n                            className=\"register-id-area\"\r\n                            placeholder=\"Identifiant\"\r\n                            value={identifiant}\r\n                            onChange={(e) => setIdentifiant(e.target.value)}\r\n                        />\r\n                        {errors.identifiant && <p className=\"error-message\">{errors.identifiant}</p>}\r\n                    </div>\r\n                    <div className=\"input-container\">\r\n                        <input\r\n                            type=\"password\"\r\n                            spellCheck=\"false\"\r\n                            className=\"register-password-area\"\r\n                            placeholder=\"Mot de passe\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                        />\r\n                        {errors.password && <p className=\"error-message\">{errors.password}</p>}\r\n                    </div>\r\n                    <div className=\"input-container\">\r\n                        <input\r\n                            type=\"password\"\r\n                            spellCheck=\"false\"\r\n                            className=\"register-password-confirmation-area\"\r\n                            placeholder=\"Confirmation mot de passe\"\r\n                            value={passwordConfirmation}\r\n                            onChange={(e) => setPasswordConfirmation(e.target.value)}\r\n                        />\r\n                        {errors.confirmation && <p className=\"error-message\">{errors.confirmation}</p>}\r\n                    </div>\r\n                </form>\r\n                <button\r\n                    className=\"button-register-completed\"\r\n                    onClick={handleRegisterCompleted}\r\n                    disabled={isLoading}\r\n                >\r\n                    {isLoading ? 'En cours...' : \"S'inscrire\"}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RegisterBlock;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}